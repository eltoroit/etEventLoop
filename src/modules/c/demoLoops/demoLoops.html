<template>
	<div class="slds-is-relative">
		<div class="slds-text-heading_large slds-p-bottom_x-large">Long runnning processes can block the execution!</div>
		<div class="slds-text-heading_medium slds-p-bottom_x-large">
			I want to simulate an operation that takes a long time to complete, I will simulate this using a loop that will be executed for few seconds. To make sure the user does not panic while
			waiting, I will show a SLDS spinner.
		</div>
		<div class="slds-text-heading_medium slds-p-bottom_x-large">What would be the best way to implement this?</div>
		<template if:true={showSpinner}>
			<lightning-spinner variant="brand" alternative-text="Demo..."></lightning-spinner>
		</template>
	</div>
	<c-tabset variant="vertical" default-tab="Test">
		<c-tab label="Test">
			<lightning-layout-item size="12">
				<div class="slds-m-bottom_medium">
					<c-button if:false={showSpinner} label="Show Spinner" onclick={onShowSpinner}></c-button>
					<c-button if:true={showSpinner} label="Hide Spinner" onclick={onHideSpinner}></c-button>
				</div>
			</lightning-layout-item>
			<lightning-layout-item size="12">
				<c-show-code path="loopTest.png"></c-show-code>
			</lightning-layout-item>
		</c-tab>
		<c-tab label="While Loop">
			<lightning-layout multiple-rows>
				<lightning-layout-item size="12">
					<div class="slds-m-bottom_medium">
						<c-button label="Start While Loop" onclick={onWhileLoop}></c-button>
					</div>
				</lightning-layout-item>
				<lightning-layout-item size="8">
					<c-show-code path="loopWhile.png"></c-show-code>
				</lightning-layout-item>
				<lightning-layout-item size="4">
					<div class="slds-m-left_medium">
						<c-show-notes>
							<li><b> Open the inspector tool and watch the event working </b></li>
							<li>The UI freezes!</li>
							<c-show-notes>
								<li>Where is the spinner?</li>
								<li>The button remains clicked (red) during the execution of the loop</li>
							</c-show-notes>
							<li>
								<i>There are about <b>2.5M</b> iterations per second (on my computer)</i>
							</li>
						</c-show-notes>
					</div>
				</lightning-layout-item>
			</lightning-layout>
		</c-tab>
		<c-tab label="Promise">
			<lightning-layout multiple-rows>
				<lightning-layout-item size="12">
					<div class="slds-m-bottom_medium">
						<c-button label="Start Promise Loop" onclick={onPromiseLoop}></c-button>
					</div>
				</lightning-layout-item>
				<lightning-layout-item size="8">
					<c-show-code path="loopPromise.png"></c-show-code>
				</lightning-layout-item>
				<lightning-layout-item size="4">
					<div class="slds-m-left_medium">
						<c-show-notes>
							<li><b> Open the inspector tool and watch the event working </b></li>
							<li>The UI freezes!</li>
							<c-show-notes>
								<li>Where is the spinner?</li>
								<li>The button remains clicked (red) during the execution of the loop</li>
							</c-show-notes>
							<li>
								<i>There are about <b>100K</b> iterations per second (on my computer)</i>
							</li>
						</c-show-notes>
					</div>
				</lightning-layout-item>
			</lightning-layout>
		</c-tab>
		<c-tab label="setTimeout">
			<lightning-layout multiple-rows>
				<lightning-layout-item size="12">
					<div class="slds-m-bottom_medium">
						<c-button label="Start setTimeout Loop" onclick={onSetTimeoutLoop}></c-button>
					</div>
				</lightning-layout-item>
				<lightning-layout-item size="8">
					<c-show-code path="loopSetTimeout.png"></c-show-code>
				</lightning-layout-item>
				<lightning-layout-item size="4">
					<div class="slds-m-left_medium">
						<c-show-notes>
							<li><b> Open the inspector tool and watch the event working </b></li>
							<li>The UI does not freeze</li>
							<li>The UI freezes!</li>
							<c-show-notes>
								<li>Look mom, the spinner!</li>
							</c-show-notes>
							<li>
								<i>There are about <b>200</b> iterations per second (on my computer)</i>
							</li>
						</c-show-notes>
					</div>
				</lightning-layout-item>
			</lightning-layout>
		</c-tab>
	</c-tabset>
	<div class="slds-align_absolute-center slds-p-top_medium">&nbsp;</div>
</template>
